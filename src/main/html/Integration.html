<!doctype html>
<html lang="en">
<head>
  <title>Integration</title>
  <script src="https://cdn.tiny.cloud/1/b6r7yu1n19ibkha4z0s4gdvt0l7z2mc3dzlnc780ep0uuzks/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>
</head>
<body>
  <textarea class='classic'></textarea>
  <script>
    tinymce.init({
        selector: '.classic',
        content_style: 'body {font-size: 14pt;}',
        plugins: 'table spellchecker fullscreen code print link image lists advlist wordcount',
        menubar: 'file edit view insert format tools table',
        menu: {
          file: { title: 'File', items: 'newdocument restoredraft | preview | print ' },
          edit: { title: 'Edit', items: 'undo redo | cut copy paste | selectall | searchreplace' },
          view: { title: 'View', items: 'spellchecker | preview fullscreen' },
          insert: { title: 'Insert', items: 'inserttable' },
          format: { title: 'Format', items: 'bold italic underline strikethrough' },
          tools: { title: 'Tools', items: 'spellchecker' },
          table: { title: 'Table', items: 'inserttable | cell row column | tableprops deletetable' },
        },
        toolbar: 'undo redo | bold italic | alignleft aligncenter alignright alignjustify | fontselect fontsizeselect formatselect | bullist numlist outdent indent | link image | fullscreen wordcount code print | customToolBarButton',
        setup: function (editor) {
          editor.ui.registry.addButton('customToolBarButton', {
            text: 'My Custom Button',
            onAction: function () {
              // alert('Button clicked!');
              tinymce.activeEditor.windowManager.open({
                title: 'Custom dialog',
                body: {
                  type: 'panel',
                  items: [
                    {
                      type: 'input',
                      name: 'customInput',
                      label: 'Please enter your fruit'
                    }
                  ]
                },
                buttons: [
                  {
                    type: 'submit',
                    text: 'Submit'
                  }
                ],
                onSubmit: function (dialogApi) {
                  editor.execCommand('mceInsertContent', false, `<span style="color:red">${dialogApi.getData().customInput}</span>`);
                  dialogApi.close();
                }
              });
            }
          });
        }
    });
  </script>
  <form method='post' style='margin-top: 146px'>
    <div class='inlineEditor' style='padding: 6px 0px;'>Click to edit</div>
  </form>
  <script>
    tinymce.init({
        selector: '.inlineEditor',
        inline: true,
        setup: function (editor) {
          // context button
          editor.ui.registry.addButton('customStrikeButton', {
            text: 'strike red',
            icon: 'cancel',
            tooltip: 'strike through and change colour to red',
            onAction: function (_) {
              editor.insertContent(`&nbsp;<span style="color: red; text-decoration: line-through;">${editor.selection.getContent()}</strong>&nbsp;`);
            }
          });
          // context tool bar
          editor.ui.registry.addContextToolbar('imagealignment', {
            predicate: function (node) {
              return node.nodeName.toLowerCase() === 'p' && editor.selection.getContent().length > 0;
            },
            items: 'bold italic underline customStrikeButton',
            position: 'selection',
            scope: 'editor'
          });
        },
    });
  </script>
</body>

<!--
  1. Doc is wordy. Sometimes, things can be simplified. Example: https://www.tiny.cloud/docs/configure/editor-appearance/#menu, description/specification of properties can be put in a table
  2. Should mention the relationship of the values of menu and menu barhttps://www.tiny.cloud/docs/configure/editor-appearance/#menu
  3. Didn't expect that some menu items are only available via plugins. Ok -- Found it after looking into a plugin
  4. From the perspective of a person whose english is a secondary language, sometimes, it is hard to understand the language used in the doc
  5. It would be nice to show the icon associated with each option in this list https://www.tiny.cloud/docs/advanced/available-toolbar-buttons/#thecoretoolbarbuttons
  6. https://v4.mui.com/components/buttons/ is good at demonstrating the usage of their UI components. We should have something like that for (https://www.tiny.cloud/docs/ui-components/dialog/)
-->
</html>